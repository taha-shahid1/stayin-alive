name: Stayin' Alive

on:
  schedule:
    - cron: "*/10 * * * *"  # every 10 minutes
  workflow_dispatch:    

jobs:
  stayin-alive:
    runs-on: ubuntu-latest
    environment: CRON-Job
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-node@v4
        with:
          node-version: 20

      - run: npm install 

      - run: npm run dev
        env:
          UPSTASH_REDIS_REST_URL: ${{ secrets.UPSTASH_REDIS_REST_URL }}
          UPSTASH_REDIS_REST_TOKEN: ${{ secrets.UPSTASH_REDIS_REST_TOKEN }}
          ENDPOINT_URL: ${{ secrets.ENDPOINT_URL }}
          AUTH_HEADER: ${{ secrets.AUTH_HEADER }}
